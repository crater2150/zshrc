#!/bin/zsh

grep -q "void" /etc/os-release || return

alias xq="xbps-query -Rs"

alias xfiles="xbps-query -f"

alias xupdate="xbps-install -Su"
function xowner() {
	xbps-query -Ro "*${1}*"
}

sv() {
	command sv "$@"
	if [[ "$1" == "up" ]]; then
		shift
		sleep 0.5
		command sv check "$@"
	fi
}

sv-manage() {
	action=$1
	shift
	case "$action" in
		add)
			for service in "$@"; do
				ln -s /etc/sv/${service:s#/##} /var/service
			done
			;;
		remove|rm)
			for service in "$@"; do
				rm /var/service/${service:s#/##}
			done
			;;
	esac
}
